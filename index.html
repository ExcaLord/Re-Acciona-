<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Re-Acciona Plus - Clasificador inteligente de residuos que te ayuda a reciclar correctamente y cuidar el medio ambiente" />
    <meta name="keywords" content="reciclaje, residuos, medio ambiente, clasificación, inteligencia artificial, sostenibilidad" />
    <meta name="author" content="Re-Acciona Plus" />
    <meta name="theme-color" content="#16a34a" />
    <meta property="og:title" content="Re-Acciona Plus - Clasificador Inteligente de Residuos" />
    <meta property="og:description" content="Aprende a reciclar correctamente con nuestro clasificador inteligente de residuos" />
    <meta property="og:type" content="website" />
    <title>Re-Acciona Plus - Clasificador Inteligente de Residuos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <header class="text-center mb-12" role="banner">
        <h1 class="text-4xl font-bold text-green-600 mb-2" aria-label="Re-Acciona Plus - Clasificador Inteligente de Residuos">Re-Acciona Plus</h1>
        <p class="text-gray-600 text-lg" role="contentinfo">
          Tu asistente inteligente para el reciclaje
        </p>
        <div class="w-24 h-1 bg-green-500 mx-auto mt-4 rounded-full" role="presentation"></div>
      </header>

      <!-- Main App Section -->
      <main class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12" role="main">
        <!-- Camera/Upload Section -->
        <div class="bg-white rounded-xl shadow-lg p-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-semibold text-gray-800">
              Clasificar Residuo
            </h2>
            <div class="flex space-x-2">
              <button
                id="camera-btn"
                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"
                aria-label="Activar cámara"
                role="button"
              >
                <i class="fas fa-camera mr-2" aria-hidden="true"></i>Cámara
              </button>
              <button
                id="upload-btn"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"
                aria-label="Subir imagen"
                role="button"
              >
                <i class="fas fa-upload mr-2" aria-hidden="true"></i>Subir
              </button>
            </div>
          </div>

          <!-- Camera View -->
          <div id="camera-section" class="mb-6 hidden">
            <div class="camera-container mb-4">
              <video id="camera-view" autoplay playsinline></video>
            </div>
            <div class="flex justify-center space-x-4">
              <button
                id="capture-btn"
                class="px-6 py-3 bg-green-600 text-white rounded-full hover:bg-green-700 transition pulse-animation"
                aria-label="Tomar foto"
                role="button"
              >
                <i class="fas fa-camera-retro text-xl" aria-hidden="true"></i>
              </button>
              <button
                id="switch-camera"
                class="px-6 py-3 bg-gray-200 text-gray-700 rounded-full hover:bg-gray-300 transition"
                aria-label="Cambiar cámara"
                role="button"
              >
                <i class="fas fa-sync-alt text-xl" aria-hidden="true"></i>
              </button>
            </div>
          </div>

          <!-- Upload View -->
          <div id="upload-section" class="mb-6 hidden">
            <label
              id="file-upload-label"
              for="file-upload"
              class="file-upload-label flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-xl p-12 cursor-pointer hover:border-gray-400 transition"
            >
              <i
                class="fas fa-cloud-upload-alt text-5xl text-blue-500 mb-4"
              ></i>
              <p class="text-lg font-medium text-gray-700">
                Arrastra y suelta tu imagen aquí
              </p>
              <p class="text-sm text-gray-500 mt-2">
                o haz clic para seleccionar
              </p>
              <input
                id="file-upload"
                type="file"
                accept="image/*"
                class="hidden"
              />
            </label>
            <div id="upload-preview" class="mt-4 hidden">
              <img
                id="uploaded-image"
                src=""
                alt="Preview"
                class="rounded-xl max-h-64 mx-auto"
              />
            </div>
          </div>

          <!-- Result Section -->
          <div id="result-section" class="hidden">
            <div class="result-card bg-gray-50 rounded-xl p-6 mb-6">
              <h3 class="text-xl font-semibold text-gray-800 mb-4">
                Resultado del análisis
              </h3>
              <div id="result-content" class="flex flex-col items-center">
                <!-- Result will be inserted here -->
              </div>
            </div>

            <button
              id="new-analysis"
              class="w-full py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition"
            >
              <i class="fas fa-redo mr-2"></i>Realizar nuevo análisis
            </button>
          </div>

          <!-- Initial View -->
          <div id="initial-view" class="text-center py-12">
            <i class="fas fa-recycle text-6xl text-green-500 mb-6"></i>
            <h3 class="text-xl font-medium text-gray-700 mb-2">
              Comienza a clasificar tus residuos
            </h3>
            <p class="text-gray-500">
              Usa la cámara o sube una foto para identificar el tipo de residuo
              y cómo reciclarlo
            </p>
          </div>
        </div>

        <!-- AI Chat Section -->
                  <div class="bg-white rounded-xl shadow-lg p-6" role="complementary" aria-label="Asistente de reciclaje">
                    <div class="flex items-center mb-6">
                      <div
                        class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3"
                        aria-hidden="true"
                      >
                        <i class="fas fa-robot text-purple-600"></i>
                      </div>
                      <h2 class="text-2xl font-semibold text-gray-800">
                        Asistente de Reciclaje
                      </h2>
                    </div>
        
                    <div id="ai-chat" class="ai-chat mb-4 bg-gray-50 rounded-lg p-4" role="log" aria-live="polite" aria-label="Conversación con el asistente">
            <div class="chat-message ai-message mb-4">
              <div class="flex items-start">
                <div
                  class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-3"
                >
                  <i class="fas fa-robot text-purple-600 text-sm"></i>
                </div>
                <div class="bg-white p-3 rounded-lg shadow-sm max-w-[85%]">
                  <p class="text-gray-700">
                    ¡Hola! Soy tu asistente de reciclaje. Puedes preguntarme
                    cualquier duda sobre cómo reciclar, reutilizar o gestionar
                    residuos. También puedo ayudarte con los resultados de tus
                    análisis.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <form class="flex" role="form" aria-label="Chat con asistente" onsubmit="event.preventDefault(); sendAiMessage();">
            <label for="ai-input" class="sr-only">Escribe tu pregunta sobre reciclaje</label>
            <input
              id="ai-input"
              type="text"
              placeholder="Escribe tu pregunta sobre reciclaje..."
              class="flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
              aria-label="Mensaje para el asistente"
            />
            <button
              id="ai-send"
              type="submit"
              class="px-4 py-2 bg-purple-600 text-white rounded-r-lg hover:bg-purple-700 transition"
              aria-label="Enviar mensaje"
            >
              <i class="fas fa-paper-plane" aria-hidden="true"></i>
            </button>
          </form>

          <div class="mt-6">
            <h3 class="text-lg font-medium text-gray-700 mb-3">
              Tipos de residuos comunes
            </h3>
            <div class="grid grid-cols-2 gap-3">
              <div
                class="waste-type bg-blue-50 p-3 rounded-lg border border-blue-100 cursor-pointer"
              >
                <div class="flex items-center">
                  <div
                    class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2"
                  >
                    <i class="fas fa-trash text-blue-600 text-sm"></i>
                  </div>
                  <span class="font-medium">Orgánico</span>
                </div>
              </div>
              <div
                class="waste-type bg-yellow-50 p-3 rounded-lg border border-yellow-100 cursor-pointer"
              >
                <div class="flex items-center">
                  <div
                    class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center mr-2"
                  >
                    <i class="fas fa-recycle text-yellow-600 text-sm"></i>
                  </div>
                  <span class="font-medium">Plástico</span>
                </div>
              </div>
              <div
                class="waste-type bg-green-50 p-3 rounded-lg border border-green-100 cursor-pointer"
              >
                <div class="flex items-center">
                  <div
                    class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2"
                  >
                    <i class="fas fa-leaf text-green-600 text-sm"></i>
                  </div>
                  <span class="font-medium">Papel/Cartón</span>
                </div>
              </div>
              <div
                class="waste-type bg-red-50 p-3 rounded-lg border border-red-100 cursor-pointer"
              >
                <div class="flex items-center">
                  <div
                    class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-2"
                  >
                    <i
                      class="fas fa-battery-three-quarters text-red-600 text-sm"
                    ></i>
                  </div>
                  <span class="font-medium">Peligroso</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer class="text-center text-gray-500 text-sm mt-12">
        <p>
          Re-Acciona Plus - Clasificación inteligente de residuos para un
          planeta más limpio
        </p>
        <p class="mt-1">© 2025 Todos los derechos reservados</p>
      </footer>
    </div>

    <script src="app.js"></script>
  </body>
</html>
